!function(){"use strict";var t=function(t,n,e){if(this.window=t,this.afterShow=e,angular.isDefined(n)){this.cacheAdapter=n;var i=this.cacheAdapter.get(this.window.title);angular.isDefined(i)&&(this.window.toggleStatus=i)}};t.prototype.getSanjiWindowObj=function(){return this.window},t.prototype.setTitle=function(t){this.window.title=t},t.prototype.getTitle=function(){return this.window.title},t.prototype.getLink=function(){return this.window.link},t.prototype.navigateTo=function(t){this.window.recordState.push(t),this.window.navigateContent=t},t.prototype.getWindowStatus=function(){return this.window.navigateContent},t.prototype.goToProcessingState=function(){this.reset(),this.navigateTo("mx-processing")},t.prototype.goToInfoState=function(){this.navigateTo("mx-info")},t.prototype.goToEditState=function(){this.navigateTo("mx-edit")},t.prototype.goToAddState=function(){this.navigateTo("mx-add")},t.prototype.goToProblemState=function(){this.reset(),this.navigateTo("mx-connection-problem")},t.prototype.goBack=function(){var t=this.window.recordState;t.pop(),this.window.navigateContent=t[t.length-1]},t.prototype.reset=function(){this.window.recordState.length=0,this.window.recordState.push("")},t.prototype.isShowFooter=function(){var t;return t=2>=this.window.recordState.length?!1:"mx-processing"===this.window.navigateContent?!1:!0},t.prototype.setToggleStatus=function(t){this.window.toggleStatus=t},t.prototype.toggleWidget=function(){this.window.toggleStatus=!this.window.toggleStatus,angular.isDefined(this.cacheAdapter)&&this.cacheAdapter.put(this.window.title,this.window.toggleStatus)},t.prototype.afterShow=function(){angular.isFunction(this.afterShow)&&this.afterShow()},t.$inject=["windowConfig","cacheAdapter","afterShow"];var n=function(){this.step={isEnd:!0,name:null}};n.prototype.setNextStep=function(t){this.step=t},n.prototype.isEnd=function(){return this.step.isEnd},angular.module("sanji.window",[]).constant("_",window._).provider("sanjiWindowConfig",function(){var t,n,e=function(){return"_"+Math.random().toString(36).substr(2,9)};t={},t.init=function(t,n){t.setCacheAdapter=function(t){n.cacheAdapter=t},t.getCacheAdapter=function(){return n.cacheAdapter},t.setAfterShow=function(t){n.afterShow=t},t.getAfterShow=function(){return n.afterShow}},n={},t.init(this,n),this.$get=function(){var i={id:e(),title:"",link:"",isProcessing:!1,navigateContent:"",recordState:[n.navigateContent],toggleStatus:!1,animateClass:"slide-left"};return t.init(i,n),i}}).directive("sanjiWindowNextStep",function(){return{restrict:"A",require:"^sanjiWindow",link:function(t,n,e,i){var o=t.$eval(e.sanjiWindowNextStep);i.setNextStep(o)}}}).directive("mxHide",["$animate",function(t){return{restrict:"A",scope:{mxHide:"=",afterHide:"&",afterShow:"&"},link:function(n,e){n.$watch("mxHide",function(i){i?t.addClass(e,"ng-hide",n.afterHide):t.removeClass(e,"ng-hide",n.afterShow)})}}}]).directive("sanjiReloadWindow",function(){return{restrict:"EA",templateUrl:"templates/sanji-window-connect-problem.html",scope:{reloadWindow:"&"}}}).directive("sanjiWindow",["$log","$controller","sanjiWindowConfig","sanjiWindowFactory",function(e,i,o){return{templateUrl:"templates/sanji-window.html",restrict:"EA",replace:!0,controller:["$scope",function(t){t.sanjiWindowStepMgr=i(n),this.setNextStep=function(n){t.sanjiWindowStepMgr.setNextStep(n)}}],link:function(n,e,r){var a=r.title||"",s=r.contentUrl,c=r.iconClass||"",d=r.contentSize||"",u=r.padding||"",h=r.helpInfo||"",w=null;n.icon=c,n.contentSize=d,n.padding=u,n.helpInfoUrl=h,s&&(o.title=a,o.link=s,n.sanjiWindowMgr=i(t,{windowConfig:o,cacheAdapter:o.getCacheAdapter(),afterShow:o.getAfterShow()}),r.$observe("title",function(t){n.sanjiWindowMgr.setTitle(t)})),n.$on("$destroy",function(){w=null})}}}])}(),function(){"use strict";angular.module("sanji.window").factory("sanjiWindowFactory",function(){var t=function(){return"_"+Math.random().toString(36).substr(2,9)},n=function(n,e){"auto"===e?angular.extend(this,n):this.url=n.url,this.id=t(),this.isProcessing=!1,this.navigateContent=n.state||"",this.recordState=[this.navigateContent],this.toggleStatus=!1,this.animateClass=n.animateClass||"slide-left"};return n})}(),function(){"use strict";angular.module("sanji.window").service("sanjiWindowService",["$http","$q","sanjiWindowFactory","_",function(t,n,e,i){var o=this;o.data=[],o.init=function(){var i=n.defer();return t.get("/scripts/bundle.json").then(function(t){var n=new e(t.data.view,"auto");o.add(n),i.resolve(n)},function(t){i.reject(t)}),i.promise},o.get=function(){return o.data},o.add=function(t){o.data.push(t)},o.delete=function(t){var n,e=this.data,i=e.length;for(n=0;i>n;n++)if(t.id===e[n].id){e.splice(n,1);break}},o.getSettingByTitle=function(t){return i.find(o.data,{title:t})},o.fetch=function(n){var e=o.getSettingByTitle(n);return t.get(e.contentJson.resources.uri)},o.put=function(n,e){var i=o.getSettingByTitle(n);return t.put(i.contentJson.resources.uri,e)}}])}();
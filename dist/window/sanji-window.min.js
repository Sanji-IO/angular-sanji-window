!function(){"use strict";var t=function(t,e,n){if(this.window=t,this.afterShow=n,angular.isDefined(e)){this.cacheAdapter=e;var i=this.cacheAdapter.get(this.window.title);angular.isDefined(i)&&(this.window.toggleStatus=i)}};t.prototype.getSanjiWindowObj=function(){return this.window},t.prototype.setTitle=function(t){this.window.title=t},t.prototype.getTitle=function(){return this.window.title},t.prototype.getLink=function(){return this.window.link},t.prototype.navigateTo=function(t){this.window.recordState.push(t),this.window.navigateContent=t},t.prototype.getWindowStatus=function(){return this.window.navigateContent},t.prototype.goToProcessingState=function(){this.reset(),this.navigateTo("mx-processing")},t.prototype.goToInfoState=function(){this.navigateTo("mx-info")},t.prototype.goToEditState=function(){this.navigateTo("mx-edit")},t.prototype.goToAddState=function(){this.navigateTo("mx-add")},t.prototype.goToProblemState=function(){this.reset(),this.navigateTo("mx-connection-problem")},t.prototype.goBack=function(){var t=this.window.recordState;t.pop(),this.window.navigateContent=t[t.length-1]},t.prototype.reset=function(){this.window.recordState.length=0,this.window.recordState.push("")},t.prototype.isShowFooter=function(){var t;return t=2>=this.window.recordState.length?!1:"mx-processing"===this.window.navigateContent?!1:!0},t.prototype.setToggleStatus=function(t){this.window.toggleStatus=t},t.prototype.toggleWidget=function(){this.window.toggleStatus=!this.window.toggleStatus,angular.isDefined(this.cacheAdapter)&&this.cacheAdapter.put(this.window.title,this.window.toggleStatus)},t.prototype.afterShow=function(){angular.isFunction(this.afterShow)&&this.afterShow()},t.$inject=["windowConfig","cacheAdapter","afterShow"];var e=function(){this.step={isEnd:!0,name:null}};e.prototype.setNextStep=function(t){this.step=t},e.prototype.isEnd=function(){return this.step.isEnd},angular.module("sanji.window",[]).constant("_",window._).provider("sanjiWindowConfig",function(){var t,e,n=function(){return"_"+Math.random().toString(36).substr(2,9)};t={},t.init=function(t,e){t.setCacheAdapter=function(t){e.cacheAdapter=t},t.getCacheAdapter=function(){return e.cacheAdapter},t.setAfterShow=function(t){e.afterShow=t},t.getAfterShow=function(){return e.afterShow}},e={},t.init(this,e),this.$get=function(){var i={id:n(),title:"",link:"",isProcessing:!1,navigateContent:"",recordState:[this.navigateContent],toggleStatus:!1,animateClass:"slide-left"};return t.init(i,e),i}}).directive("sanjiWindowNextStep",function(){return{restrict:"A",require:"^sanjiWindow",link:function(t,e,n,i){var o=t.$eval(n.sanjiWindowNextStep);i.setNextStep(o)}}}).directive("mxHide",["$animate",function(t){return{restrict:"A",scope:{mxHide:"=",afterHide:"&",afterShow:"&"},link:function(e,n){e.$watch("mxHide",function(i){i?t.addClass(n,"ng-hide",e.afterHide):t.removeClass(n,"ng-hide",e.afterShow)})}}}]).directive("sanjiReloadWindow",function(){return{restrict:"EA",templateUrl:"templates/sanji-window-connect-problem.html",scope:{reloadWindow:"&"}}}).directive("sanjiWindow",["$log","$controller","sanjiWindowConfig",function(n,i,o){return{templateUrl:"templates/sanji-window.html",restrict:"EA",replace:!0,controller:["$scope",function(t){t.sanjiWindowStepMgr=i(e),this.setNextStep=function(e){t.sanjiWindowStepMgr.setNextStep(e)}}],link:function(e,n,r){var a=r.title||"",s=r.contentUrl,c=r.iconClass||"",d=r.contentSize||"",w=r.padding||"",p=r.helpInfo||"";e.icon=c,e.contentSize=d,e.padding=w,e.helpInfoUrl=p,s&&(o.title=a,o.link=s,e.sanjiWindowMgr=i(t,{windowConfig:o,cacheAdapter:o.getCacheAdapter(),afterShow:o.getAfterShow()}),r.$observe("title",function(t){e.sanjiWindowMgr.setTitle(t)}))}}}])}();
!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("angular"),require("angular-busy"),require("angular-material"),require("angular-material-icons")):"function"==typeof define&&define.amd?define(["angular","angular-busy","angular-material","angular-material-icons"],e):"object"==typeof exports?exports.sjWindow=e(require("angular"),require("angular-busy"),require("angular-material"),require("angular-material-icons")):n.sjWindow=e(n.angular,n.ngBusy,n.ngMaterial,n.ngMdIcons)}(this,function(n,e,t,i){return function(n){function e(i){if(t[i])return t[i].exports;var r=t[i]={exports:{},id:i,loaded:!1};return n[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(e,"__esModule",{value:!0});var r=t(9),a=i(r),o=t(11),u=i(o),c=t(12),s=i(c);t(10),t(1),t(8),t(7);var l=t(6),d=i(l),f=t(4),m=i(f),h=t(2),v=i(h),g=t(5),p=i(g),w=t(3),y=i(w),b=a["default"].module("sanji.window",[u["default"],s["default"],"cgBusy"]);b.factory("sanjiWindowService",d["default"].factory),b.controller("SanjiWindowController",m["default"]),b.controller("SanjiWindowStateController",v["default"]),b.directive("sanjiWindow",p["default"].directiveFactory),b.directive("sanjiWindowState",y["default"].directiveFactory),e["default"]=b=b.name,n.exports=e["default"]},function(n,e){},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),r=["$log","$scope"],a=function(){function n(){for(var e=this,i=arguments.length,r=Array(i),a=0;i>a;a++)r[a]=arguments[a];t(this,n),n.$inject.forEach(function(n,t){return e[n]=r[t]})}return i(n,[{key:"init",value:function(n,e){this.sanjiWindowMgr=n.sanjiWindowMgr,void 0!==this.stateName&&n.register({name:this.stateName,linkName:this.linkName,icon:this.icon,isDefault:void 0!==e.defaultState})}}]),n}();a.$inject=r,e["default"]=a,n.exports=e["default"]},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),r=new WeakMap,a=[],o=function(){function n(e){t(this,n),n.directiveFactory.$inject.forEach(function(t,i){n[t]=e[i],r.set(n[t],e[i])}),this.restrict="EA",this.replace=!0,this.transclude=!0,this.scope={},this.require=["sanjiWindowState","^sanjiWindow"],this.controller="SanjiWindowStateController",this.controllerAs="vm",this.bindToController={stateName:"@",linkName:"@",icon:"@"},this.template='<div ng-show="vm.sanjiWindowMgr.navigateContent === vm.stateName" ng-transclude></div>'}return i(n,[{key:"link",value:function(n,e,t,i,r){i[0].init(i[1],t)}}],[{key:"directiveFactory",value:function(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];return n.instance=new n(t),n.instance}}]),n}();o.directiveFactory.$inject=a,e["default"]=o,n.exports=e["default"]},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),r=["$rootScope","$scope","sanjiWindowService"],a=function(){function n(){for(var e=this,i=arguments.length,r=Array(i),a=0;i>a;a++)r[a]=arguments[a];t(this,n),n.$inject.forEach(function(n,t){return e[n]=r[t]}),this.sanjiWindowMgr=this.sanjiWindowService.create(this.windowId,{name:this.windowName}),this.$scope.$on("$destroy",function(){e.sanjiWindowMgr.clearStates(),e.sanjiWindowService.destroy(e.sanjiWindowMgr.getId())})}return i(n,[{key:"register",value:function(n){var e=this.sanjiWindowMgr;n.isDefault&&e.navigateTo(n.name),e.addState(n)}},{key:"refresh",value:function(){this.$rootScope.$broadcast("sj:window:refresh",{id:this.windowId,promise:this.sanjiWindowMgr.promise})}}]),n}();a.$inject=r,e["default"]=a,n.exports=e["default"]},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),r=new WeakMap,a=["$log"],o=function(){function n(e){t(this,n),n.directiveFactory.$inject.forEach(function(t,i){n[t]=e[i],r.set(n[t],e[i])}),this.templateUrl="sanji-window.tpl.html",this.restrict="EA",this.replace=!0,this.transclude=!0,this.scope={},this.controller="SanjiWindowController",this.controllerAs="vm",this.bindToController={windowId:"@",windowName:"@",showLoadingBtn:"@"}}return i(n,null,[{key:"directiveFactory",value:function(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];return n.instance=new n(t),n.instance}}]),n}();o.directiveFactory.$inject=a,e["default"]=o,n.exports=e["default"]},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),r=function(){function n(){t(this,n),this.collection=[]}return i(n,[{key:"_addInstance",value:function(n){this.collection.push(n)}},{key:"destroy",value:function(n){var e=this.collection.findIndex(function(e){return e.id===n});this.collection.splice(e,1)}},{key:"_isIdExist",value:function(n){return-1!==this.collection.findIndex(function(e){return e.id===n})}},{key:"get",value:function(n){return this.collection.find(function(e){return e.id===n})}},{key:"create",value:function(n,e){var r=null;if(e=e||{},void 0===n)throw new Error("Please give a window id.");if(this._isIdExist(n))throw new Error("The window id "+n+" is already exist.");var a=function(){function e(i){t(this,e),this.states=[],this.links=[],this.id=n,this.name=i.name||"",this.navigateContent=i.navigateContent||"",this.promise=null}return i(e,[{key:"getId",value:function(){return this.id}},{key:"navigateTo",value:function(n){this.navigateContent=n}},{key:"addState",value:function(n){n.linkName&&this.links.push(n),this.states.push(n)}},{key:"clearStates",value:function(){this.links.length=0,this.states.length=0}}]),e}();return r=new a(e),this._addInstance(r),r}}],[{key:"factory",value:function(){return new n}}]),n}();e["default"]=r,n.exports=e["default"]},function(n,e){var t,i=window.angular;try{t=i.module(["ng"])}catch(r){t=i.module("ng",[])}var a='<div class="sj-window-loading" layout layout-align="space-around">\n    <md-progress-circular class="sj-spinner-bg md-whiteframe-1dp" md-diameter="35px" md-mode="indeterminate"></md-progress-circular>\n  </div>';t.run(["$templateCache",function(n){n.put("sanji-window-loading.tpl.html",a)}]),n.exports=a},function(n,e){var t,i=window.angular;try{t=i.module(["ng"])}catch(r){t=i.module("ng",[])}var a='<md-card class="sj-window" cg-busy="{promise: vm.sanjiWindowMgr.promise, templateUrl: \'sanji-window-loading.tpl.html\'}">\n    <md-card-header class="sj-window-header">\n      <md-card-header-text layout layout-align="space-between center">\n        <h3 flex>{{vm.windowName}}</h3>\n        <div flex class="sj-window-btn-group">\n          <md-button ng-if="undefined!==vm.showLoadingBtn" type="button" aria-label="Refresh" class="md-icon-button" ng-click="vm.refresh()">\n            <ng-md-icon icon="refresh"></ng-md-icon>\n          </md-button>\n          <md-menu ng-if="1 < vm.sanjiWindowMgr.links.length" md-position-mode="target-right target">\n            <md-button type="button" aria-label="Open menu" class="md-icon-button" ng-click="$mdOpenMenu($event)">\n              <ng-md-icon md-menu-origin icon="apps" ng-attr-style="fill: #5e5e5e"></ng-md-icon>\n            </md-button>\n            <md-menu-content width="4">\n              <md-menu-item ng-repeat="state in vm.sanjiWindowMgr.links track by $index">\n                <md-button type="button" aria-label="{{::state.linkName}}"\n                ng-click="vm.sanjiWindowMgr.navigateTo(state.name)">\n                  <div layout>\n                    <p flex ng-bind="::state.linkName"></p>\n                    <ng-md-icon ng-if="undefined!==state.icon"\n                      md-menu-origin icon="{{::state.icon}}" ng-attr-style="fill: #5e5e5e"></ng-md-icon>\n                  </div>\n                </md-button>\n              </md-menu-item>\n            </md-menu-content>\n          </md-menu>\n        </div>\n      </md-card-header-text>\n    </md-card-header>\n    <md-card-content>\n      <div ng-transclude></div>\n    </md-card-content>\n  </md-card>';t.run(["$templateCache",function(n){n.put("sanji-window.tpl.html",a)}]),n.exports=a},function(e,t){e.exports=n},function(n,t){n.exports=e},function(n,e){n.exports=t},function(n,e){n.exports=i}])});
//# sourceMappingURL=angular-sanji-window.js.map
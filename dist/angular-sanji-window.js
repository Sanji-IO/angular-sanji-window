!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("angular"),require("angular-busy"),require("angular-material"),require("angular-material-icons")):"function"==typeof define&&define.amd?define(["angular","angular-busy","angular-material","angular-material-icons"],e):"object"==typeof exports?exports.sjWindow=e(require("angular"),require("angular-busy"),require("angular-material"),require("angular-material-icons")):n.sjWindow=e(n.angular,n.ngBusy,n.ngMaterial,n.ngMdIcons)}(this,function(n,e,t,i){return function(n){function e(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return n[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var t={};return e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,e,t){Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:t})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=12)}([function(n,e){},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={transclude:!0,require:{parent:"^sanjiWindow"},bindings:{defaultState:"@",stateName:"@",linkName:"@",icon:"@"},template:'<div ng-if="vm.sanjiWindowMgr.navigateContent === vm.stateName" ng-transclude></div>',controller:"SanjiWindowStateController",controllerAs:"vm"};e.default=t},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),r=[],a=function(){function n(){for(var e=this,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];t(this,n),n.$inject.forEach(function(n,t){return e[n]=r[t]}),this.sanjiWindowMgr=null}return i(n,[{key:"$onInit",value:function(){this.sanjiWindowMgr=this.parent.sanjiWindowMgr,void 0!==this.stateName&&this.parent.register({name:this.stateName,linkName:this.linkName,icon:this.icon,isDefault:void 0!==this.defaultState})}}]),n}();a.$inject=r,e.default=a},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={transclude:!0,bindings:{windowId:"@",windowName:"@",showLoadingBtn:"@"},templateUrl:"sanji-window.tpl.html",controller:"SanjiWindowController",controllerAs:"vm"};e.default=t},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),r=["$rootScope","$scope","sanjiWindowService"],a=function(){function n(){for(var e=this,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];t(this,n),n.$inject.forEach(function(n,t){return e[n]=r[t]}),this.sanjiWindowMgr=this.sanjiWindowService.create(this.windowId,{name:this.windowName})}return i(n,[{key:"$onDestroy",value:function(){this.sanjiWindowMgr.clearStates(),this.sanjiWindowService.destroy(this.sanjiWindowMgr.getId())}},{key:"register",value:function(n){var e=this.sanjiWindowMgr;n.isDefault&&e.navigateTo(n.name),e.addState(n)}},{key:"refresh",value:function(){this.$rootScope.$broadcast("sj:window:refresh",{id:this.windowId,promise:this.sanjiWindowMgr.promise})}}]),n}();a.$inject=r,e.default=a},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),r=function(){function n(){t(this,n),this.collection=[]}return i(n,[{key:"_addInstance",value:function(n){this.collection.push(n)}},{key:"destroy",value:function(n){var e=this.collection.findIndex(function(e){return e.id===n});this.collection.splice(e,1)}},{key:"_isIdExist",value:function(n){return-1!==this.collection.findIndex(function(e){return e.id===n})}},{key:"get",value:function(n){return this.collection.find(function(e){return e.id===n})}},{key:"create",value:function(n,e){var r=null;if(e=e||{},void 0===n)throw new Error("Please give a window id.");if(this._isIdExist(n))throw new Error("The window id "+n+" is already exist.");var a=function(){function e(i){t(this,e),this.states=[],this.links=[],this.id=n,this.name=i.name||"",this.navigateContent=i.navigateContent||"",this.promise=null}return i(e,[{key:"getId",value:function(){return this.id}},{key:"navigateTo",value:function(n){this.navigateContent=n}},{key:"addState",value:function(n){n.linkName&&this.links.push(n),this.states.push(n)}},{key:"clearStates",value:function(){this.links.length=0,this.states.length=0}}]),e}();return r=new a(e),this._addInstance(r),r}}],[{key:"factory",value:function(){return new n}}]),n}();e.default=r},function(n,e){var t,i=window.angular;try{t=i.module(["ng"])}catch(r){t=i.module("ng",[])}var a='\n<div class="sj-window-loading" layout layout-align="space-around">\n    <md-progress-circular class="sj-spinner-bg md-whiteframe-1dp"\n    md-diameter="35px" md-mode="indeterminate"></md-progress-circular>\n  </div>\n',o="sanji-window-loading.tpl.html";t.run(["$templateCache",function(n){n.put(o,a)}]),n.exports=a},function(n,e){var t,i=window.angular;try{t=i.module(["ng"])}catch(r){t=i.module("ng",[])}var a='\n<md-card class="sj-window" cg-busy="{promise: vm.sanjiWindowMgr.promise, templateUrl: \'sanji-window-loading.tpl.html\'}">\n    <md-card-header class="sj-window-header">\n      <md-card-header-text layout layout-align="space-between center">\n        <h3 flex ng-bind="vm.windowName"></h3>\n        <div flex class="sj-window-btn-group">\n        <md-button ng-if="undefined!==vm.showLoadingBtn"\n        type="button" aria-label="Refresh" class="md-icon-button" ng-click="vm.refresh()">\n            <ng-md-icon icon="refresh"></ng-md-icon>\n          </md-button>\n          <md-menu ng-if="1 < vm.sanjiWindowMgr.links.length"\n          md-position-mode="target-right target">\n          <md-button type="button" aria-label="Open menu" class="md-icon-button"\n          ng-click="$mdOpenMenu($event)">\n              <ng-md-icon md-menu-origin icon="apps"></ng-md-icon>\n            </md-button>\n            <md-menu-content width="4">\n              <md-menu-item ng-repeat="state in vm.sanjiWindowMgr.links track by $index">\n                <md-button type="button" aria-label="{{::state.linkName}}"\n                ng-click="vm.sanjiWindowMgr.navigateTo(state.name)">\n                  <div layout>\n                    <p flex ng-bind="::state.linkName"></p>\n                    <md-icon ng-if= "undefined!==state.icon" ng-md-icon md-menu-origin icon="{{::state.icon}}"></md-icon>\n                  </div>\n                </md-button>\n              </md-menu-item>\n            </md-menu-content>\n          </md-menu>\n        </div>\n      </md-card-header-text>\n    </md-card-header>\n    <md-card-content>\n      <div ng-transclude></div>\n    </md-card-content>\n  </md-card>\n',o="sanji-window.tpl.html";t.run(["$templateCache",function(n){n.put(o,a)}]),n.exports=a},function(e,t){e.exports=n},function(n,t){n.exports=e},function(n,e){n.exports=t},function(n,e){n.exports=i},function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(e,"__esModule",{value:!0});var r=t(8),a=i(r),o=t(10),u=i(o),s=t(11),l=i(s);t(9),t(0),t(7),t(6);var d=t(5),c=i(d),f=t(4),m=i(f),g=t(2),h=i(g),p=t(3),w=i(p),v=t(1),y=i(v),b=a.default.module("sanji.window",[u.default,l.default,"cgBusy"]);b.factory("sanjiWindowService",c.default.factory),b.controller("SanjiWindowController",m.default),b.controller("SanjiWindowStateController",h.default),b.component("sanjiWindow",w.default),b.component("sanjiWindowState",y.default),e.default=b=b.name}])});
